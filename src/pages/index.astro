---
import Layout from "../layouts/Layout.astro";

import fetchApi from "../lib/strapi";
import type Plan from "../interfaces/plan";
import Card from "../components/card.astro";

const plans = await fetchApi<Plan[]>({
  endpoint: "plans", // the content type to fetch
  wrappedByKey: "data", // the key to unwrap the response
});
---

<Layout>
  {
    plans.map((plan) => (
      <Card {...plan.attributes} name={plan.attributes.name} />
    ))
  }
</Layout>
